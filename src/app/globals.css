@import "tailwindcss";
@plugin "@tailwindcss/typography";

@theme {
  --font-family-sans:
    "Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  
  /* Typography colors for light mode */
  --color-prose: theme(colors.black);
  --color-prose-headings: theme(colors.black);
  --color-prose-links: theme(colors.black);
  --color-prose-bold: theme(colors.black);
}

@font-face {
  font-family: "Inter";
  font-style: normal;
  font-weight: 100 900;
  font-display: optional;
}

.sticky-nav {
  position: sticky;
  z-index: 10;
  top: 0;
}

.prose .react-tweet-theme {
  --tweet-container-margin: 1.5rem 1.5rem;
}

.prose .react-tweet-theme img {
  margin-top: 0;
}

.callout p {
  margin-top: 0;
  margin-bottom: 0;
}

.ad-block p {
  margin-top: 0;
  margin-bottom: 0;
}

.ad-block h3 {
  margin-top: 0;
  margin-bottom: 0;
}

.ad-block a {
  text-decoration: none;
}

.audio-player p {
  margin-top: 0;
  margin-bottom: 2;
}

/* rehype-pretty-code theme */
code[data-theme*=" "],
code[data-theme*=" "] span {
  color: var(--shiki-light);
}

@media (prefers-color-scheme: dark) {
  code[data-theme*=" "],
  code[data-theme*=" "] span {
    color: var(--shiki-dark);
  }
}

/* line numbers */
code[data-line-numbers] {
  counter-reset: line;
}

code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  display: inline-block;
  width: 1rem;
  margin-right: 0.5rem;
  text-align: right;
  color: theme(colors.gray.400);
}

@media (prefers-color-scheme: dark) {
  code[data-line-numbers] > [data-line]::before {
    color: theme(colors.gray.600);
  }
}

/* Remove default prose background for code blocks */
.prose pre {
  background-color: transparent !important;
}

@layer components {
  .sticky-nav {
    @apply bg-zinc-100 border-b border-zinc-200;
  }

  .callout p,
  .audio-player p,
  .prose strong {
    @apply text-gray-800;
  }

  [data-rehype-pretty-code-figure] {
    @apply bg-slate-200 rounded;
  }

  [data-rehype-pretty-code-title] {
    @apply pl-4 pt-2;
  }

  [data-highlighted-line] {
    @apply bg-slate-300;
  }

  [data-highlighted-chars] {
    @apply bg-slate-300 rounded;
  }
}

/* Dark mode typography colors */
@media (prefers-color-scheme: dark) {
  .prose {
    --tw-prose-body: white;
    --tw-prose-headings: white;
    --tw-prose-links: white;
    --tw-prose-bold: white;
    --tw-prose-counters: theme(colors.gray.400);
    --tw-prose-bullets: theme(colors.gray.600);
    --tw-prose-hr: theme(colors.gray.700);
    --tw-prose-quotes: theme(colors.white);
    --tw-prose-quote-borders: theme(colors.gray.600);
    --tw-prose-captions: theme(colors.gray.400);
    --tw-prose-code: theme(colors.white);
    --tw-prose-pre-code: theme(colors.gray.200);
    --tw-prose-pre-bg: theme(colors.gray.900);
    --tw-prose-th-borders: theme(colors.gray.600);
    --tw-prose-td-borders: theme(colors.gray.700);
  }
  
  /* Global text colors for dark mode */
  body {
    @apply text-white;
  }
  
  p, h1, h2, h3, h4, h5, h6 {
    @apply text-white;
  }
}

@layer components {
  @media (prefers-color-scheme: dark) {
    .sticky-nav {
      @apply bg-gray-900 border-gray-800;
    }

    .callout p,
    .audio-player p,
    .prose strong {
      @apply text-white;
    }

    [data-rehype-pretty-code-figure] {
      @apply bg-gray-800;
    }

    [data-highlighted-line] {
      @apply bg-slate-600;
    }

    [data-highlighted-chars] {
      @apply bg-slate-600;
    }
  }
}
